<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Magazine Viewer</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: auto; }
        img { width: 100%; max-height: 300px; object-fit: cover; }
        pre { background: #f4f4f4; padding: 10px; overflow-x: auto; }
    </style>
</head>
<body>
    <h1 id="title">Magazine Title</h1>
    <img id="image" src="" alt="Magazine Image">
    <p id="description">Description of the magazine.</p>
    <h3>Content</h3>
    <pre id="content">Loading content...</pre>

    <script>
        const urlParams = new URLSearchParams(window.location.search);
        const magazineId = urlParams.get('id');

        fetch(`http://localhost:4000/api/magazine/${magazineId}`)
            .then(response => response.json())
            .then(data => {
                document.getElementById('title').textContent = data.title;
                document.getElementById('image').src = data.image_url;
                document.getElementById('description').textContent = data.description;

                fetch(data.content_url)
                    .then(res => res.text())
                    .then(text => document.getElementById('content').textContent = text)
                    .catch(err => document.getElementById('content').textContent = "Failed to load content.");
            })
            .catch(err => console.error(err));
    </script>
</body>
</html>
